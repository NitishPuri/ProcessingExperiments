<!DOCTYPE html>

<head>

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <!-- Google Analytics-->
    {% if site.google_analytics and jekyll.environment == 'production' %}
    <!---->
    {% include analytics.html %}
    <!---->
    {% endif %}

    <title>
        {{ page.title }} &middot; {{ site.title }}
    </title>

    <!-- CSS -->
    <link rel="stylesheet" href="{{ site.baseurl }}/public/css/poole.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/public/css/syntax.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/public/css/lanyon.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/public/css/custom.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

    <script src="{{ site.baseurl }}/lib/glslCanvas.min.js"></script>

    <!-- <script src="{{ site.baseurl }}/lib/dat.gui.min.js"></script> -->

    <!--Add Libs-->
    {% for lib in page.libs %}
    <script src="{{ site.baseurl }}/lib/{{ lib }}"></script>
    <!---->
    {% endfor %}

    <!-- Add Mathjax-->
    {% if page.use_math %}
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
    <script type="text/javascript">
        init_mathjax = function () {
            if (window.MathJax) {
                // MathJax loaded
                MathJax.Hub.Config({
                    tex2jax: {
                        inlineMath: [['$', '$'], ["\\(", "\\)"]],
                        displayMath: [['$$', '$$'], ["\\[", "\\]"]]
                    },
                    displayAlign: 'left', // Change this to 'center' to center equations.
                    "HTML-CSS": {
                        styles: { '.MathJax_Display': { "margin": 0 } }
                    }
                });
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
            }
        }
        init_mathjax();
    </script>
    <!---->
    {% endif %}

    <!--Add scripts-->
    {% for script in page.scripts %}
    <script src="{{ script }}"></script>
    <!---->
    {% endfor %}

    <!--Add shaders-->
    {% if page.fragShader %}
    <script id="frag-shader" src="{{ page.fragShader }}" type="not-javascript"></script>
    <!---->
    {% endif %}


    <style>
        body {
            margin: 0px;
        }

        canvas {
            padding-left: 0rem;
        }

        .homelink {
            position: fixed;
            bottom: 0.5em;
            right: 0.5em;
            background-color: rgba(10, 10, 10, 0.4);
            padding: 0.5em;
            color: white;
            text-decoration: none;
        }

        .homelink:hover {
            text-decoration: underline
        }

        .stats {
            position: fixed;
            bottom: 0.1em;
            left: 0.5em;
            background-color: rgba(10, 10, 10, 0.4);
            padding: 0.1em;
            color: white;
            font-size: 10pt;
            text-decoration: none;
        }
    </style>
    <script>
        function createCanvasCustom(opt = {}) {
            let cnv = document.createElement("canvas")
            cnv.style.width = '100%';
            cnv.style.height = '100%';
            document.getElementById('sketch-holder').appendChild(cnv)

            let sandbox = new GlslCanvas(cnv);

            fetch(document.getElementById('frag-shader').src)
                .then(res => res.text())
                .then(text => sandbox.load(text))

            return cnv
        }

        window.addEventListener('load', createCanvasCustom)
    </script>
</head>

<body>
    <div id="sketch-holder">
        <!-- Our sketch will go here!!! -->
    </div>
    <h1 class="page-title">{{ page.title }}</h1>
    <div class="container content">
        {{ content }}
    </div>
    <a class="homelink" href="{{ site.baseurl }}/">â˜° Home</a>
</body>